<!doctype html>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>OftenBack</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="./static/css/reset.css" />
        <link rel="stylesheet" href="./static/css/main1.css" />
        <link rel="stylesheet" href="./static/css/svg1.css" />
        <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    </head>

    <body class="container" id="container">
        <nav id="navigation" class="collapseOnMobile"></nav>
        <main id="main">
            <div id="box2">
                <div class="landingabout">
                    <svg
                        version="1.1"
                        xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink="http://www.w3.org/1999/xlink"
                        viewBox="0 0 600 750"
                        preserveAspectRatio="xMidYMid meet"
                        id="aboutGraph2">
                

                        <g>
                            <text x="303" y="25" class="aboutSvgName" text-anchor="start">NICHOLAS</text>
                            <text x="303" y="50" class="aboutSvgName" text-anchor="start">BACUEZ</text>
                            <text x="303" y="65" class="atob" text-anchor="start">@oftenback.io</text>

                            <g id="aboutGraphMain">
                                <rect
                                    x="0"
                                    y="0"
                                    width="580"
                                    height="700"
                                    style="fill: #ffffff; stroke-width: 0; stroke: rgb(0, 0, 0)"
                                    ry="5px"
                                    rx="5px" />

                                <g id="graphOnly">
                                    <g transform="rotate(-12 300,300)" id="mainGraphFrame">
                                        <g id="countries"></g>
                                        <g id="cities"></g>
                                        <g id="activitiesunderlayer"></g>
                                        <g id="mainactivities"></g>
                                        <g id="activities"></g>
                                        <g id="languagesunderlayer"></g>
                                        <g id="languages"></g>
                                        <g id="relations"></g>
                                        <g id="underlayer"></g>

                                        <!-- skills -->
                                        <path id="linguistics" fill="black" stroke="none" fill-rule="evenodd" />
                                        <path id="htmlcss" fill="black" stroke="none" fill-rule="evenodd" />
                                        <path id="phpjs" fill="black" stroke="none" fill-rule="evenodd" />
                                        <path id="data" fill="black" stroke="none" fill-rule="evenodd" />
                                        <path id="python" fill="black" stroke="none" fill-rule="evenodd" />
                                        <path id="nlp" fill="black" stroke="none" fill-rule="evenodd" />
                                        <path id="sqldatabase" fill="black" stroke="none" fill-rule="evenodd" />
                                        <path id="java" fill="black" stroke="none" fill-rule="evenodd" />
                                        <path id="hideCircle" fill="black" stroke="none" fill-rule="evenodd" />
                                        
                                        <text x="303" y="210" class="tierName" text-anchor="start" style="fill:var(--bhblue_light);">RELATIONS</text>
                                <text x="303" y="180" class="tierName" text-anchor="start" style="fill:var(--bhblue);">LANGUAGES</text>
                                <text x="303" y="150" class="tierName" text-anchor="start" style="fill:var(--bhyellow_light);">SUB-ROLE</text>
                                <text x="303" y="120" class="tierName" text-anchor="start" style="fill:var(--bhyellow);">ROLE</text>
                                <text x="303" y="90" class="tierName" text-anchor="start" style="fill:var(--bhred);">CITY</text>
                                <text x="303" y="60" class="tierName" text-anchor="start" style="fill:var(--bhred);">COUNTRY</text>
                                        
    <!--<path d="M300 300 L300 40 A260 260 0 0 1 560 300 Z" fill="#f00" />-->
  <!-- Slice 2 -->
  <!--<path d="M300 300 L560 300 A260 260 0 0 1 300 560 Z" fill="#0f0" />-->
  <!-- Slice 3 -->
  <!--
  <path d="M300 300 L300 560 A260 260 0 0 1 40 300 Z" fill="#00f" />
                                        
                                        <path id="path1" d="M300 60 A250 250 0 0 1 560 300" fill="none" stroke="none"/>
                                        
                                          <text font-size="12" fill="#000">
    <textPath href="#path1" startOffset="50%">Label 1</textPath>
  </text>
  -->
                                        
                                    </g>
                                </g>

                                    <text x="303" y="25" class="aboutSvgName" text-anchor="start">NICHOLAS</text>
                                    <text x="303" y="50" class="aboutSvgName" text-anchor="start">BACUEZ</text>
                                    <text x="303" y="65" class="atob" text-anchor="start">@oftenback.io</text>

                                <text x="303" y="92" class="aboutSvgTextA" text-anchor="start" style="fill:rgba(255, 51, 102, 1);">LINGUISTICS</text>
                                <text x="303" y="107" class="aboutSvgTextA" text-anchor="start" style="fill:rgba(255, 51, 102, 1);">PROGRAMMING</text>
                                <text x="303" y="122" class="aboutSvgTextA" text-anchor="start" style="fill:rgba(255, 51, 102, 1);">DESIGN</text>
                                <text x="303" y="145" class="aboutSvgTextB" text-anchor="start" style="fill:#999999;"></text>

                                           
                        
                                    


                                    <circle
                                        cx="300"
                                        cy="300"
                                        r="82"
                                        style="fill: none; stroke-width: 4; stroke: #ffffff" />

                                    <circle cx="300" cy="300" r="70" style="fill: #fff; stroke-width: 0" />
                                    <!--                                <image xlink:href="./static/images/portrait_001.jpg" x="175" y="200" height="250" width="250" mask="url(#portaitMask)" />-->

                                    <circle
                                        cx="300"
                                        cy="300"
                                        r="70"
                                        style="fill: none; stroke-width: 20; stroke: var(--bhred)" />
                                    
                                    <circle
                                        cx="300"
                                        cy="300"
                                        r="80"
                                        style="fill: none; stroke-width: 1; stroke: black" />


                                <text x="35" y="655" class="infoLineSubtextLink" text-anchor="start">Austin, TX</text>
                                <text x="35" y="670" class="atob" text-anchor="start">oftenback.io</text>
                                <text x="35" y="685" class="infoLineSubtextLink" text-anchor="start">
                                    nicholasbacuez@gmail.com
                                </text>

                                <!-- LANGUAGES DADABC-->

                                <image
                                    x="185"
                                    y="601"
                                    height="100"
                                    width="100"
                                    xlink:href="./static/images/oblogoLargeFaceNoTitle.svg" />

                                <g
                                    transform="translate(250.000000,570.000000) scale(0.50000,0.50000)"
                                    fill="var(--bhyellow)"
                                    stroke="none">
                                    <rect
                                        x="30"
                                        y="30"
                                        width="40"
                                        height="40"
                                        style="fill: #ffffff; stroke: #ffffff; stroke-width: 0" />
                                    <path
                                        fill="#f5d300"
                                        d="M61.312,42.443c-0.465-0.254-1.16-0.381-2.088-0.381h-4.98v5.801h4.855c0.965,0,1.688-0.117,2.17-0.352
  c0.854-0.41,1.281-1.221,1.281-2.432C62.55,43.771,62.136,42.892,61.312,42.443z" />
                                    <path
                                        d="M49.562,10.357c-21.367,0-38.75,17.384-38.75,38.751c0,7.399,2.093,14.577,6.058,20.794l-6.277,16.49
    c-0.156,0.409-0.05,0.87,0.268,1.17c0.205,0.194,0.472,0.296,0.742,0.296c0.149,0,0.3-0.03,0.442-0.094l15.361-6.875
    c6.524,4.562,14.172,6.969,22.157,6.969c21.368,0,38.751-17.384,38.751-38.75C88.312,27.741,70.93,10.357,49.562,10.357z
    M46.802,42.135H35.889v4.966h9.565v3.75h-9.565v9.053h-4.482V38.341h15.396V42.135z M67.427,59.904h-4.98
    c-0.137-0.479-0.234-0.864-0.293-1.157c-0.117-0.605-0.18-1.226-0.189-1.86l-0.029-2.007c-0.02-1.377-0.258-2.295-0.715-2.754
    s-1.314-0.688-2.57-0.688h-4.406v8.467h-4.409V38.312h10.327c1.477,0.029,2.613,0.215,3.408,0.557s1.469,0.845,2.021,1.509
    c0.457,0.547,0.818,1.152,1.084,1.816c0.268,0.664,0.4,1.421,0.4,2.271c0,1.025-0.258,2.034-0.775,3.025s-1.373,1.691-2.564,2.102
    c0.996,0.4,1.701,0.969,2.117,1.707c0.414,0.737,0.623,1.863,0.623,3.377v1.45c0,0.986,0.039,1.655,0.119,2.007
    c0.119,0.557,0.396,0.967,0.832,1.23V59.904z" />
                                </g>

                                <g
                                    transform="translate(270.000000,610.000000) scale(0.50000,0.50000)"
                                    fill="var(--bhyellow)"
                                    stroke="none">
                                    <path
                                        transform="rotate(45 50,45)"
                                        d="M51.283,7.69c-21.367,0-38.75,17.384-38.75,38.751c0,7.399,2.093,14.577,6.058,20.794l-6.277,16.49
  c-0.156,0.409-0.05,0.87,0.268,1.17c0.205,0.194,0.472,0.296,0.742,0.296c0.149,0,0.3-0.03,0.442-0.094l15.361-6.875
  c6.524,4.562,14.172,6.969,22.157,6.969c21.368,0,38.751-17.384,38.751-38.75C90.034,25.074,72.651,7.69,51.283,7.69z" />

                                    <path
                                        transform="translate(-2.000000,0.000000)"
                                        fill="#FFFFFF"
                                        d="M48.846,57.236H32.484V35.645h15.835v3.823H36.893v4.585h10.488v3.75H36.893v5.552h11.953V57.236z
  M69.793,57.236h-4.51 l-8.791-15.32v15.32h-4.203V35.645h4.729L65.59,50.7V35.645h4.203V57.236z" />
                                </g>

                                <g
                                    transform="translate(275.000000,655.000000) scale(0.350000,0.350000)"
                                    fill="var(--bhyellow)"
                                    stroke="none">
                                    <path
                                        transform="rotate(60 50,45)"
                                        d="M49.041,9.523c-21.367,0-38.75,17.385-38.75,38.751c0,7.398,2.093,14.577,6.058,20.794l-6.277,16.49
  c-0.156,0.409-0.05,0.87,0.268,1.17c0.205,0.194,0.472,0.296,0.742,0.296c0.149,0,0.3-0.029,0.442-0.094l15.361-6.875
  c6.524,4.562,14.172,6.969,22.156,6.969c21.368,0,38.751-17.384,38.751-38.75S70.411,9.523,49.041,9.523z" />
                                    <path
                                        transform="translate(-2.000000,0.000000)"
                                        fill="#FFFFFF"
                                        d="M46.896,59.106H30.535
  V37.515H46.37v3.822H34.944v4.585h10.488v3.75H34.944v5.553h11.953V59.106z
         M64.97,57.709c-1.523,1.303-3.68,1.955-6.463,1.955
  c-2.843,0-5.078-0.644-6.707-1.926c-1.629-1.285-2.442-3.051-2.442-5.297h4.307c0.14,0.986,0.414,1.725,0.824,2.213
  c0.746,0.889,2.027,1.332,3.842,1.332c1.086,0,1.97-0.117,2.647-0.352c1.285-0.449,1.932-1.284,1.932-2.506
  c0-0.713-0.316-1.264-0.945-1.654c-0.631-0.381-1.63-0.719-2.999-1.012l-2.338-0.513c-2.297-0.508-3.875-1.059-4.734-1.655
  c-1.455-0.996-2.184-2.554-2.184-4.673c0-1.933,0.714-3.54,2.137-4.818c1.423-1.279,3.514-1.919,6.271-1.919
  c2.303,0,4.269,0.603,5.896,1.809s2.479,2.956,2.559,5.251h-4.336c-0.08-1.299-0.662-2.222-1.743-2.769
   c-0.721-0.361-1.617-0.543-2.688-0.543c-1.191,0-2.143,0.234-2.854,0.703c-0.711,0.47-1.066,1.123-1.066,1.963
   c0,0.772,0.352,1.349,1.051,1.729c0.451,0.254,1.406,0.552,2.869,0.894l3.79,0.895c1.66,0.39,2.904,0.913,3.734,1.567
   c1.287,1.016,1.93,2.485,1.928,4.409C67.257,54.767,66.495,56.404,64.97,57.709z" />
                                </g>

                                <!-- MAP #DADABC-->
     
</g>

                            <text x="575" y="500">
                                <tspan x="575" y="500" dy="0" text-anchor="end"></tspan>
                                <tspan x="575" y="500" dy="10" text-anchor="end"></tspan>
                                <tspan x="575" y="500" dy="20" text-anchor="end"></tspan>
                            </text>

                            <g transform="translate(0, 30)">
                                <text x="852" y="665" id="updatedate" class="updatedate" text-anchor="start"></text>
                                <text
                                    x="75"
                                    y="660"
                                    id="updateyear"
                                    class="updateyear"
                                    transform="rotate(-90 327,413)"></text>
                                <text x="575" y="677" class="updatelast" text-anchor="end">LAST UPDATE</text>
                            </g>
                            
                            <g id="resume-btn" onclick="startAllAnimations()">>
                            <circle cx="50" cy="590" r="40" style="fill:#FF3366;stroke-width:4;stroke:#FFFFFF;">></circle>
                            <text x="50" y="590" text-anchor="middle" stroke-width="2px" dy=".3em" class="resume-text">82</text>
                            </g>

                            
                        </g>
                        
                    </svg>

                    <script>
                        var d = new Date(document.lastModified);
                        document.getElementById("updatedate").innerHTML =
                            ("0" + d.getDate()).slice(-2) + "." + ("0" + (d.getMonth() + 1)).slice(-2);
                        document.getElementById("updateyear").innerHTML = d.getFullYear();
                    </script>
                </div>
            </div>
        </main>
        <aside></aside>

        <footer id="footer">
            <div class="footerBoxes collapseOnMobile"></div>
            <div class="footerBoxes">
                &copy; 2012
                <script>
                    new Date().getFullYear() > 2010 && document.write("-" + new Date().getFullYear());
                </script>
                oftenback.io <br />this site is optimized for chrome + safari
            </div>
            <div class="footerBoxes collapseOnMobile"></div>
        </footer>

        <script>
               
            function polarToCartesian(centerX, centerY, radius, angleInDegrees) {
                var angleInRadians = ((angleInDegrees - 90) * Math.PI) / 180.0;

                return {
                    x: centerX + radius * Math.cos(angleInRadians),
                    y: centerY + radius * Math.sin(angleInRadians)
                };
            }

            /*
    opts = {
    	cx              <-- center x
    	cy              <-- center y
    	radius          <-- circle radius
    	start_angle     <-- start angle in degrees
    	end_angle       <-- end angle in degrees
    };
    */
            
            const CX = 300;
            const CY = 300;
            const INITIAL_ANGLE = 60;
            const START_YEAR = 1978;
            const END_YEAR = 2060;
            const CURRENT_YEAR = new Date().getFullYear() + 1;
            const SECTOR_BUFFER = 1;
   
            const countriesData = [
                { name: "france", year_span: 2005 - 1978, color: "var(--bhred)", label: "FRANCE" },
                { name: "usa", year_span: CURRENT_YEAR - 2005, color: "var(--bhred)", label: "USA" },
                { name: "remainder", year_span: 0, color: "var(--bhred)", label: "" }
            ];
            
            const citiesData = [
                {name: "oloron", year_span: 1981 - 1978, color: "var(--bhred_light)", label: "OLORON" },
                {name: "lisieux", year_span: 1984 - 1981, color: "var(--bhred_light)", label: "LISIEUX" },
                {name: "standre", year_span: 1989 - 1984, color: "var(--bhred_light)", label: "ST. ANDRE" },
                {name: "grenoble", year_span: 1992 - 1989, color: "var(--bhred_light)", label: "GRENOBLE" },
                {name: "caen", year_span: 1994 - 1992, color: "var(--bhred_light)", label: "CAEN" },
                {name: "valbonne", year_span: 1996 - 1994, color: "var(--bhred_light)", label: "NICE" },
                {name: "paris", year_span: 2005 - 1996, color: "var(--bhred_light)", label: "PARIS" },
                {name: "austin1", year_span: 2011 - 2005, color: "var(--bhred_light)", label: "AUSTIN" },
                {name: "raphael", year_span: 2013 - 2011, color: "var(--bhred_light)", label: "SAN RAPHAEL" },
                {name: "cambridge", year_span: 2016 - 2013, color: "var(--bhred_light)", label: "CAMBRIDGE" },
                {name: "austin2", year_span: CURRENT_YEAR - 2016, color: "var(--bhred_light)", label: "AUSTIN" },
                {name: "remaindercities", year_span: 0, color: "var(--bhred_light)",  label: "" }
                ];
            
            const activitiesWhiteData = [
                {name: "activitiesunderlayer", year_span: CURRENT_YEAR - START_YEAR, color: "#FFFFFF", label: "" }
                ];
            
            const mainActivitiesData = [
                {name: "preschooltime", year_span: 1982 - 1978, color: "none", label: "" },
                {name: "education", year_span: 2012 - 1982, color: "var(--bhyellow)", label: "EDUCATION" },
                {name: "work", year_span: CURRENT_YEAR - 2012, color: "var(--bhyellow)", label: "OCCUPATION" },
                {name: "remaindermainactivities", year_span: 0, color: "var(--bhyellow)", label: "" }
            ]
            
            const activitiesData = [
                {name: "unassigned", year_span: 1982 - 1978, color: "none", label: "" },
                {name: "preschool", year_span: 1984 - 1982, color: "var(--bhyellow_light)", label: "PRESCHOOL" },
                {name: "elementary", year_span: 1990 - 1984, color: "var(--bhyellow_light)", label: "ELEMENTARY" },
                {name: "middleschool", year_span: 1994 - 1990, color: "var(--bhyellow_light)", label: "MIDDLESCHOOL" },
                {name: "highschool", year_span: 1997 - 1994, color: "var(--bhyellow_light)", label: "HIGHSCHOOL" },
                {name: "hk", year_span: 1998 - 1997, color: "var(--bhyellow_light)", label: "HK" },
                {name: "unassigned1", year_span: 1999 - 1998, color: "var(--bhyellow_light)", label: "" },
                {name: "dea", year_span: 2005 - 1999, color: "var(--bhyellow_light)", label: "MASTERS (FR)" },
                {name: "phd", year_span: 2012 - 2005, color: "var(--bhyellow_light)", label: "MASTERS + PHD (US)" },
                {name: "unassigned2", year_span: 2013 - 2012, color: "var(--bhyellow_light)", label: "" },
                {name: "intel", year_span: 2016 - 2013, color: "var(--bhyellow_light)", label: "INTEL" },
                {name: "leave", year_span: 2017 - 2016, color: "var(--bhyellow_light)", label: "" },
                {name: "indeed_taxo", year_span: 2020 - 2017, color: "var(--bhyellow_light)", label: "INDEED" },
                {name: "indeed_qm", year_span: 2021 - 2020, color: "var(--bhyellow_light)", label: "INDEED" },
                {name: "indeed_dev", year_span: CURRENT_YEAR - 2021, color: "var(--bhyellow_light)", label: "INDEED" },
                {name: "remainderactivities", year_span: 0, color: "var(--bhyellow_light)",  label: "" }
                ];
            
            const languagesWhiteData = [
                {name: "languagesunderlayer", year_span: CURRENT_YEAR - START_YEAR, color: "#FFFFFF", label: "" }
                ];
            
            //const languagesData = [
            //    [{name: "latin5", year_span: 1992 - 1978, color: "var(--oftenBeige2)"},
            //     {name: "latin4", year_span: 2009 - 1992, color: "var(--oftenBeige2)"},
            //     {name: "latin3", year_span: CURRENT_YEAR - 2009, color: "var(--oftenBeige2)"},
            //     {name: "remainder7", year_span: 0, color: "var(--oftenBeige2)" }],
            //    [{name: "latin2", year_span: 1992 - 1978, color: "none"},
            //     {name: "latin1", year_span: 2009 - 1992, color: "var(--bhlightgrey)"},
            //     {name: "latin", year_span: CURRENT_YEAR - 2009, color: "var(--oftenBeige2)"},
            //     {name: "remainder6", year_span: 0, color: "var(--oftenBeige2)" }],
//
            //    [{name: "spanish5", year_span: 1992 - 1978, color: "var(--oftenBeige2)"},
            //     {name: "spanish4", year_span: 2009 - 1992, color: "var(--oftenBeige2)"},
            //     {name: "spanish3", year_span: CURRENT_YEAR - 2009, color: "var(--oftenBeige2)"},
            //     {name: "remainder5", year_span: 0, color: "var(--oftenBeige2)" }],
            //    [{name: "spanish2", year_span: 1992 - 1978, color: "none"},
            //     {name: "spanish1", year_span: 2009 - 1992, color: "var(--bhlightgrey)"},
            //     {name: "spanish", year_span: CURRENT_YEAR - 2009, color: "var(--oftenBeige2)"},
            //     {name: "remainder4", year_span: 0, color: "var(--oftenBeige2)" }],
//
            //    [{name: "english3", year_span: 1989 - 1978, color: "var(--oftenBeige2)"},
            //     {name: "english2", year_span: CURRENT_YEAR - 1989, color: "var(--oftenBeige2)"},
            //     {name: "remainder3", year_span: 0, color: "var(--oftenBeige2)" }],
            //    [{name: "english1", year_span: 1989 - 1978, color: "none"},
            //     {name: "english", year_span: CURRENT_YEAR - 1989, color: "var(--bhlightgrey)"},
            //     {name: "remainder2", year_span: 0, color: "var(--oftenBeige2)" }],
//
            //    [{name: "french1", year_span: CURRENT_YEAR - 1978, color: "var(--oftenBeige2)"},
            //     {name: "remainder1", year_span: 0, color: "var(--oftenBeige2)" }],
            //    [{name: "french", year_span: CURRENT_YEAR - 1978, color: "var(--bhlightgrey)"},
            //     {name: "remainder0", year_span: 0, color: "var(--oftenBeige2)" }]
            //];
            
            
            const relationsData = [
                {name: "none", year_span: 2003 - 1978, color: "none", label: "" },
                {name: "bob", year_span: 2007 - 2003, color: "var(--bhblue_light)", label: "BOB" },
                {name: "none1", year_span: 2008 - 2007, color: "none", label: "" },
                {name: "allison", year_span: 2016 - 2008, color: "var(--bhblue_light)", label: "ALLISON" },
                {name: "henry", year_span: CURRENT_YEAR - 2016, color: "var(--bhblue_light)", label: "ALLISON + HENRY" },
                {name: "remainderrelations", year_span: 0, color: "var(--bhblue_light)", label: "" }
            ];
            
            const languagesData = [
                {name: "french1", year_span: CURRENT_YEAR - 1978, color: "var(--bhblue)", label: "FRENCH" },
                {name: "remainder1", year_span: 0, color: "var(--bhblue)", label: "" }
                ];
                                   
                                   
            const underlayerWhiteData = [
                {name: "underlayer", year_span: CURRENT_YEAR - START_YEAR, color: "#FFFFFF", label: "" }
                ];
            
            
            function appendSectors(parentElementId, names, colors) {
                names.forEach((name, index) => {
                    var parentElement = document.getElementById(parentElementId);
                    var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                    path.setAttribute('id', 'sector'+name);
                    path.setAttribute('stroke', 'none');
                    path.setAttribute('fill', colors[index]);
                    path.setAttribute('fill-rule', 'evenodd');
                    parentElement.appendChild(path);
                });
                
                names.forEach((name, index) => {
                    var parentElement = document.getElementById(parentElementId);
                    var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                    path.setAttribute('id', 'sector'+name+'textpath');
                    path.setAttribute('stroke', 'none');
                    path.setAttribute('fill', 'none');
                    parentElement.appendChild(path);
                });
            }

            function makeSector(year_data, radius, start_date, end_date, lastItem) {
                var sectorBuffer = lastItem ? 0 : SECTOR_BUFFER;
                var number_of_years = end_date - start_date;
                var one_year = 300 / number_of_years;
                var start_angle = INITIAL_ANGLE + year_data.start * one_year;
                var end_angle = INITIAL_ANGLE + year_data.end * one_year - sectorBuffer;
                var start = polarToCartesian(CX, CY, radius, end_angle),
                    end = polarToCartesian(CX, CY, radius, start_angle),
                    largeArcFlag = end_angle - start_angle <= 180 ? "0" : "1";

                var path = ["M",
                    start.x,
                    start.y,
                    "A",
                    radius,
                    radius,
                    0,
                    largeArcFlag,
                    0,
                    end.x,
                    end.y,
                    "L",
                    CX,
                    CY,
                    "Z"
                ].join(" ");

                document.getElementById(year_data.name).setAttribute("d", path);
                
                 var start = polarToCartesian(CX, CY, radius-5, end_angle),
                    end = polarToCartesian(CX, CY, radius-5, start_angle),
                    largeArcFlag = end_angle - start_angle <= 180 ? "0" : "1";
                
                var textPath = ["M",
                    start.x,
                    start.y,
                    "A",
                    radius-5,
                    radius-5,
                    0,
                    largeArcFlag,
                    0,
                    end.x,
                    end.y
                ].join(" ");

                document.getElementById(year_data.name+'textpath').setAttribute("d", textPath);
                
                var textElement = document.createElementNS("http://www.w3.org/2000/svg", "text");
                textElement.setAttribute("font-size", "10"); // Example text size
                textElement.setAttribute("fill", "#fff"); // Example text color

                // Create the textPath element
                var targetTextPath = '#'+year_data.name+'textpath'
                var textPathElement = document.createElementNS("http://www.w3.org/2000/svg", "textPath");
                textPathElement.setAttributeNS("http://www.w3.org/1999/xlink", "href", targetTextPath);
                textPathElement.setAttribute("startOffset", "10%"); // Center the text on the path
                textPathElement.textContent = year_data.label;

                // Append the textPath to the text element
                textElement.appendChild(textPathElement);
                
                document.getElementById('mainGraphFrame').appendChild(textElement);
                
                
                
            }

            function count_years(years) {
                let count = 0;
                let new_years = [];
                years.forEach((item) => {
                    new_years.push({ name: "sector" + item.name, start: count, end: count + item.year_span, label: item.label });
                    count += item.year_span;
                });
                return new_years;
            }
            
            function addSectors(parentElementId, sectorData, radius) {
                let sectorNames = sectorData.map(item => item.name);
                let sectorYears = sectorData.map(item => item.year_span);
                let sectorColors = sectorData.map(item => item.color);
                let sectorLabels = sectorData.map(item => item.label);
                appendSectors(parentElementId, sectorNames, sectorColors)
                drawGraph(sectorNames, sectorLabels, sectorYears, START_YEAR, 2025, radius) 
            }

            function drawGraph(sector_names, sector_labels, year_spans, start_date, end_date, radius) {
                var sectors_year_spans = sector_names.map((sector, index) => {
                    return { name: sector, year_span: year_spans[index], label: sector_labels[index]};
                });
                var cumulative_years = count_years(sectors_year_spans);
                var item_count = cumulative_years.length;
                
                cumulative_years.forEach((year_item, index) => {
                    var lastItem = index == item_count - 1;
                    makeSector(year_item, radius, start_date, end_date, lastItem);
                });
            }
            
            function generateRadiuses(start, increment, separator, pairs) {
                const radiuses = [];
                for (let i = 0; i < pairs; i++) {
                    const base = start + i * increment;
                    radiuses.push(base, base + separator);
                }
                return radiuses;
            }
            
            addSectors("countries", countriesData, 260);
            addSectors("cities", citiesData, 230);
            addSectors("activitiesunderlayer", activitiesWhiteData, 204);
            addSectors("mainactivities", mainActivitiesData, 200);
            addSectors("activities", activitiesData, 170);
            addSectors("languagesunderlayer", languagesWhiteData, 144);
            addSectors("languages", languagesData, 140);
            addSectors("relations", relationsData, 110);
            addSectors("languagesunderlayer", underlayerWhiteData, 84);
   
            const sectorGraph = {  
                names: [],
                labels: [],
                yearSpansStart: [],
                yearSpansTarget: [],
                year: CURRENT_YEAR,
                targetYear: END_YEAR,
                duration: 4000,
                startTime: 0,
                radius: 0,
                end_year: 0,
                animateGraphic: function (timestamp) {
                    console.log(this.yearSpansStart)
                    console.log(this.yearSpansTarget);
                    console.log(this.names);
                    if (!this.startTime) this.startTime = timestamp;
                    var progress = timestamp - this.startTime;
                    var fraction = Math.min(progress / this.duration, 1);
                    console.log("this.startTime", this.startTime);
                    end_year = 0;
                    yearSpansCurrent = [];
                    for (var i = 0; i < this.yearSpansStart.length; i++) {
                        this.end_year = this.year + (this.targetYear - this.year) * fraction;
                        if (i < this.yearSpansStart.length - 1) {
                            var startValue = this.yearSpansStart[i];
                            var endValue = this.yearSpansTarget[i];
                            yearSpansCurrent.push(startValue);
                        } else {
                            var startValue = this.yearSpansStart[i];
                            var endValue = this.yearSpansTarget[i];
                            yearSpansCurrent.push(startValue + (endValue - startValue) * fraction);
                        }
                    }
                    console.log(this.names, this.labels, yearSpansCurrent, START_YEAR, this.end_year, this.radius);
                    drawGraph(this.names, this.labels, yearSpansCurrent, START_YEAR, this.end_year, this.radius);
                    

                    if (progress < this.duration) {
                        requestAnimationFrame(this.animateGraphic.bind(this));
                    } else {
                        this.yearSpansStart = this.yearSpansTarget; // Ensure final state
                    }
                }
            }

            function startAnimation(names, labels, yearSpansStart, yearSpansTarget, radius) {
                const newSectorGraph = Object.create(sectorGraph);
                newSectorGraph.names = names;
                newSectorGraph.labels = labels;
                newSectorGraph.yearSpansStart = yearSpansStart;
                newSectorGraph.yearSpansTarget = yearSpansTarget;
                newSectorGraph.startTime = 0; // Reset startTime
                newSectorGraph.radius = radius;
                requestAnimationFrame(newSectorGraph.animateGraphic.bind(newSectorGraph)); // Bind the method to the object
            }
            
            var countriesNames = countriesData.map(item => item.name);
            var countriesLabels = countriesData.map(item => item.label);
            var countriesStartYears = countriesData.map(item => item.year_span);
            var countriesTargetYears = [...countriesStartYears];
            countriesTargetYears[countriesTargetYears.length - 1] = END_YEAR - CURRENT_YEAR;
            
            var citiesNames = citiesData.map(item => item.name);
            var citiesLabels = citiesData.map(item => item.label);
            var citiesStartYears = citiesData.map(item => item.year_span);
            var citiesTargetYears = [...citiesStartYears];
            citiesTargetYears[citiesTargetYears.length - 1] = END_YEAR - CURRENT_YEAR;
            
            var activitiesNames = activitiesData.map(item => item.name);
            var activitiesLabels = activitiesData.map(item => item.label);
            var activitiesStartYears = activitiesData.map(item => item.year_span);
            var activitiesTargetYears = [...activitiesStartYears];
            activitiesTargetYears[activitiesTargetYears.length - 1] = END_YEAR - CURRENT_YEAR;
            
            var mainActivitiesNames = mainActivitiesData.map(item => item.name);
            var mainActivitiesLabels = mainActivitiesData.map(item => item.label);
            var mainActivitiesStartYears = mainActivitiesData.map(item => item.year_span);
            var mainActivitiesTargetYears = [...mainActivitiesStartYears];
            mainActivitiesTargetYears[mainActivitiesTargetYears.length - 1] = END_YEAR - CURRENT_YEAR;
            
            var languagesNames = languagesData.map(item => item.name);
            var languagesLabels = languagesData.map(item => item.label);
            var languagesStartYears = languagesData.map(item => item.year_span);
            var languagesTargetYears = [...languagesStartYears];
            languagesTargetYears[languagesTargetYears.length - 1] = END_YEAR - CURRENT_YEAR;
            
            var relationsNames = relationsData.map(item => item.name);
            var relationsLabels = relationsData.map(item => item.label);
            var relationsStartYears = relationsData.map(item => item.year_span);
            var relationsTargetYears = [...relationsStartYears];
            relationsTargetYears[relationsTargetYears.length - 1] = END_YEAR - CURRENT_YEAR;
            
            
             
            
            
            function startAllAnimations() {
                startAnimation(countriesNames, countriesLabels, countriesStartYears, countriesTargetYears, 260);
                startAnimation(citiesNames, citiesLabels, citiesStartYears, citiesTargetYears, 230);
                startAnimation(mainActivitiesNames, mainActivitiesLabels, mainActivitiesStartYears, mainActivitiesTargetYears, 200);
                startAnimation(activitiesNames, activitiesLabels, activitiesStartYears, activitiesTargetYears, 170);
                startAnimation(languagesNames, languagesLabels, languagesStartYears, languagesTargetYears, 140);
                startAnimation(relationsNames, relationsLabels, relationsStartYears, relationsTargetYears, 110);
            }
            


    
            //
            //    sectorwhite2
            //    var white2_years = [
            //        {name: "sectorwhite2", "start": 0, "end": 47}
            //    ];
            //    white2_years.forEach((year_item) => {
            //        makeSector(year_item, 143);
            //    });
            //
            //
            
            //var one_year = 300 / 47;
            //var temp_start_time_angle = 60;
            //var temp_end_time_angle = Math.round(60 + 47 * one_year);  // 360!
            //
            //    // skill arc
            //    skills = [
            //        [96, (temp_start_time_angle + 16 * one_year), temp_end_time_angle, 0, 'linguistics'],
            //        [107, (temp_start_time_angle + 20 * one_year), temp_end_time_angle, 1, 'htmlcss'],
            //        [118, (temp_start_time_angle + 25 * one_year), temp_end_time_angle, 1, 'phpjs'],
            //        [129, (temp_start_time_angle + 26 * one_year), temp_end_time_angle, 1, 'data'],
            //        [140, (temp_start_time_angle + 30 * one_year), temp_end_time_angle, 1, 'python'],
            //        [151, (temp_start_time_angle + 38 * one_year), temp_end_time_angle, 1, 'nlp'],
            //        [112, (temp_start_time_angle + 30 * one_year), temp_end_time_angle, 1, 'sqldatabase'],
            //        [235, (temp_start_time_angle + 38 * one_year), temp_end_time_angle, 0, 'java']
            //    ];
            //
            //    skills.forEach(function(item, index, array) {
            //        console.log(item[2], index);
            //
            //        opts = {
            //            cx: 300,
            //            cy: 300,
            //            radius: item[0],
            //            start_angle: item[1],
            //            end_angle: item[2],
            //            thickness: item[3],
            //            name: item[4]
            //        };
            //        start = polarToCartesian(opts.cx, opts.cy, opts.radius, opts.end_angle);
            //        end = polarToCartesian(opts.cx, opts.cy, opts.radius, opts.start_angle);
            //        largeArcFlag = opts.end_angle - opts.start_angle <= 180 ? "0" : "1";
            //
            //        var cutout_radius = opts.radius - opts.thickness,
            //            start2 = polarToCartesian(opts.cx, opts.cy, cutout_radius, opts.end_angle),
            //            end2 = polarToCartesian(opts.cx, opts.cy, cutout_radius, opts.start_angle),
            //
            //            d = [
            //                "M", start.x, start.y,
            //                "A", opts.radius, opts.radius, 0, largeArcFlag, 0, end.x, end.y,
            //                "L", opts.cx, opts.cy,
            //                "Z"
            //
            //                //"M", start2.x, start2.y,
            //                //"A", cutout_radius, cutout_radius, 0, largeArcFlag, 0, end2.x, end2.y,
            //                //"L", opts.cx, opts.cy,
            //                //"Z"
            //            ].join(" ");
            //
            //        document.getElementById(opts.name).setAttribute("d", d);
            //
            //    });

            //document.getElementById("arc_d_attr").innerHTML = d;
        </script>
    </body>
</html>
