<!doctype html>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>OftenBack</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./static/css/reset.css" />
    <link rel="stylesheet" href="./static/css/main1.css" />
    <link rel="stylesheet" href="./static/css/svg1.css" />
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
</head>

<body class="container" id="container">
    <nav id="navigation" class="collapseOnMobile"></nav>
    <main id="main">
        <div id="box2">
            <div class="landingabout">
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                    viewBox="0 0 600 750" preserveAspectRatio="xMidYMid meet" id="aboutGraph2">


                    <g>
                        <text x="303" y="25" class="aboutSvgName" text-anchor="start">NICHOLAS</text>
                        <text x="303" y="50" class="aboutSvgName" text-anchor="start">BACUEZ</text>
                        <text x="303" y="65" class="atob" text-anchor="start">@oftenback.io</text>

                        <g id="aboutGraphMain">
                            <rect x="0" y="0" width="580" height="700"
                                style="fill: #ffffff; stroke-width: 0; stroke: rgb(0, 0, 0)" ry="5px" rx="5px" />

                            <g id="graphOnly">
                                <g transform="rotate(-5 300,300)" id="mainGraphFrame">
                                    <g id="countries"></g>
                                    <g id="cities"></g>
                                    <g id="activitiesunderlayer"></g>
                                    <g id="mainactivities"></g>
                                    <g id="activities"></g>
                                    <g id="languagesunderlayer"></g>
                                    <g id="languages"></g>
                                    <g id="relationsunderlayer"></g>
                                    <g id="relations"></g>
                                </g>
                            </g>

                            <text x="300" y="60" class="aboutSvgName" text-anchor="start">NICHOLAS</text>
                            <text x="300" y="85" class="aboutSvgName" text-anchor="start">BACUEZ</text>
                            <text x="300" y="100" class="atob" text-anchor="start">@oftenback.io</text>

                            <text x="300" y="122" class="aboutSvgTextA" text-anchor="start"
                                style="fill:rgba(255, 51, 102, 1);">LIFE</text>
                            <text x="300" y="137" class="aboutSvgTextA" text-anchor="start"
                                style="fill:rgba(255, 51, 102, 1);">FRAGMENTS</text>
                            <text x="300" y="152" class="aboutSvgTextA" text-anchor="start"
                                style="fill:rgba(255, 51, 102, 1);">VIEWER</text>
                            <text x="300" y="167" class="aboutSvgTextB" text-anchor="start"
                                style="fill:#999999;"></text>

                            <!--
                            <circle cx="300" cy="300" r="82" style="fill: #ffffff; stroke-width: 4; stroke: #ffffff" />
                            <g id="resume-btn" onclick="startAllAnimations()">>
                            <circle cx="300" cy="300" fill="none" r="10" stroke="#FF3366" stroke-width="2" opacity="0">
                                <animate attributeName="r" from="10" to="80" dur="4s" begin="0s" repeatCount="1"/>
                                <animate attributeName="opacity" from="1" to="0" dur="4s" begin="0s" repeatCount="1"/>
                            </circle>
                            -->
                            <!--<circle cx="300" cy="300" fill="#FF3366" r="50"/>-->
                            <!--<text x="300" y="300" text-anchor="middle" stroke-width="2px" dy=".3em"-->
                                <!--class="resume-text">82</text>-->
                            </g>
                            <circle cx="300" cy="300" r="70" style="fill: #fff; stroke-width: 0" />
                            <image xlink:href="./static/images/oblogoLargeFaceNoTitle.svg" x="240" y="240" height="120" width="120" mask="url(#portaitMask)" />

                            <!--
                            <circle cx="300" cy="300" r="70"
                                style="fill: none; stroke-width: 20; stroke: var(--bhred)" />
                                -->
                            
                            <circle cx="300" cy="300" r="70" style="fill: none; stroke-width: 20; stroke: #ffffff" />
                            <g id="resume-btn" onclick="startAllAnimations()">>
                            <circle cx="300" cy="300" fill="none" r="50" stroke="#FF3366" stroke-width="2" opacity="0">
                                <animate attributeName="r" from="50" to="80" dur="4s" begin="0s" repeatCount="1"/>
                                <animate attributeName="opacity" from="1" to="0" dur="4s" begin="0s" repeatCount="1"/>
                            </circle>
                            <!--<circle cx="300" cy="300" fill="#FF3366" r="50"/>-->
                            <!--<text x="300" y="300" text-anchor="middle" stroke-width="2px" dy=".3em"-->
                                <!--class="resume-text">82</text>-->
                            </g>

                            <text x="35" y="655" class="infoLineSubtextLink" text-anchor="start">Austin, TX</text>
                            <text x="35" y="670" class="atob" text-anchor="start">oftenback.io</text>
                            <text x="35" y="685" class="infoLineSubtextLink" text-anchor="start">
                                nicholasbacuez@gmail.com
                            </text>

                            <!-- MAP #DADABC-->

                        </g>

                        <g transform="translate(0, 30)">
                            <text x="852" y="665" id="updatedate" class="updatedate" text-anchor="start"></text>
                            <text x="75" y="660" id="updateyear" class="updateyear"
                                transform="rotate(-90 327,413)"></text>
                            <text x="575" y="677" class="updatelast" text-anchor="end">LAST UPDATE</text>
                        </g>

                        <!--
                        <g id="resume-btn" onclick="startAllAnimations()">>
                            <circle cx="300" cy="300" r="40" style="fill:#FF3366;stroke-width:4;stroke:#FFFFFF;">>
                            </circle>
                            <text x="300" y="300" text-anchor="middle" stroke-width="2px" dy=".3em"
                                class="resume-text">82</text>
                        </g>
                        -->
                    </g>

                </svg>

                <script>
                    var d = new Date(document.lastModified);
                        document.getElementById("updatedate").innerHTML =
                            ("0" + d.getDate()).slice(-2) + "." + ("0" + (d.getMonth() + 1)).slice(-2);
                        document.getElementById("updateyear").innerHTML = d.getFullYear();
                </script>
            </div>
        </div>
    </main>
    <aside></aside>

    <footer id="footer">
        <div class="footerBoxes collapseOnMobile"></div>
        <div class="footerBoxes">
            &copy; 2012
            <script>
                new Date().getFullYear() > 2010 && document.write("-" + new Date().getFullYear());
            </script>
            oftenback.io <br />this site is optimized for chrome + safari
        </div>
        <div class="footerBoxes collapseOnMobile"></div>
    </footer>

    <script>
        function polarToCartesian(centerX, centerY, radius, angleInDegrees) {
                var angleInRadians = ((angleInDegrees - 90) * Math.PI) / 180.0;

                return {
                    x: centerX + radius * Math.cos(angleInRadians),
                    y: centerY + radius * Math.sin(angleInRadians)
                };
            }
            
            const CX = 300;
            const CY = 300;
            const INITIAL_ANGLE = 50;
            const START_YEAR = 1978;
            const CURRENT_YEAR = new Date().getFullYear() + 1;
            const END_YEAR = CURRENT_YEAR;
            const SECTOR_BUFFER = 1;
   
            const countriesData = [
                { name: "france", year_span: 2005 - 1978, color: "var(--bhred)", label: "FRANCE" },
                { name: "usa", year_span: CURRENT_YEAR - 2005, color: "var(--bhred)", label: "USA" }
            ];
            
            const citiesData = [
                {name: "oloron", year_span: 1981 - 1978, color: "var(--bhred_light)", label: "OLORON" },
                {name: "lisieux", year_span: 1984 - 1981, color: "var(--bhred_light)", label: "LISIEUX" },
                {name: "standre", year_span: 1988 - 1984, color: "var(--bhred_light)", label: "ST. ANDRE" },
                {name: "grenoble", year_span: 1992 - 1988, color: "var(--bhred_light)", label: "GRENOBLE" },
                {name: "caen", year_span: 1994 - 1992, color: "var(--bhred_light)", label: "CAEN" },
                {name: "valbonne", year_span: 1996 - 1994, color: "var(--bhred_light)", label: "NICE" },
                {name: "paris", year_span: 2005 - 1996, color: "var(--bhred_light)", label: "PARIS" },
                {name: "austin1", year_span: 2011 - 2005, color: "var(--bhred_light)", label: "AUSTIN" },
                {name: "raphael", year_span: 2013 - 2011, color: "var(--bhred_light)", label: "SAN RAPHAEL" },
                {name: "cambridge", year_span: 2016 - 2013, color: "var(--bhred_light)", label: "CAMBRIDGE" },
                {name: "austin2", year_span: CURRENT_YEAR - 2016, color: "var(--bhred_light)", label: "AUSTIN" }
                ];
            
            const mainActivitiesData = [
                {name: "preschooltime", year_span: 1982 - 1978, color: "none", label: "" },
                {name: "school1", year_span: 1984 - 1982, color: "var(--bhyellow)", label: "SCHOOL1" },
                {name: "school2", year_span: 1988 - 1984, color: "var(--bhyellow)", label: "SCHOOL2" },
                {name: "school3", year_span: 1989 - 1988, color: "var(--bhyellow)", label: "VILLA HELENE" },
                {name: "school4", year_span: 1992 - 1989, color: "var(--bhyellow)", label: "ST JEAN BAPTISTE" },
                {name: "school5", year_span: 1994 - 1992, color: "var(--bhyellow)", label: "ST JOSEPH" },
                {name: "school6", year_span: 1996 - 1994, color: "var(--bhyellow)", label: "CIV" },
                {name: "school7", year_span: 1998 - 1996, color: "var(--bhyellow)", label: "BLANCHE DE CASTILLE" },
                {name: "out1", year_span: 1999 - 1998, color: "var(--bhyellow)", label: "" },
                {name: "school8", year_span: 2005 - 1999, color: "var(--bhyellow)", label: "PARIS 5" },
                {name: "school9", year_span: 2012 - 2005, color: "var(--bhyellow)", label: "UT AUSTIN" },
                {name: "work1", year_span: 2016 - 2012, color: "var(--bhyellow)", label: "INTEL" },
                {name: "work2", year_span: 2017 - 2016, color: "var(--bhyellow)", label: "" },
                {name: "work3", year_span: CURRENT_YEAR - 2017, color: "var(--bhyellow)", label: "INDEED" }
            ]
            
            const activitiesData = [
                {name: "unassigned", year_span: 1982 - 1978, color: "none", label: "" },
                {name: "preschool", year_span: 1984 - 1982, color: "var(--bhyellow_light)", label: "PRESCHOOL" },
                {name: "elementary", year_span: 1990 - 1984, color: "var(--bhyellow_light)", label: "ELEMENTARY" },
                {name: "middleschool", year_span: 1994 - 1990, color: "var(--bhyellow_light)", label: "MIDDLESCHOOL" },
                {name: "highschool", year_span: 1997 - 1994, color: "var(--bhyellow_light)", label: "HIGHSCHOOL" },
                {name: "hk", year_span: 1998 - 1997, color: "var(--bhyellow_light)", label: "HK" },
                {name: "unassigned1", year_span: 1999 - 1998, color: "var(--bhyellow_light)", label: "" },
                {name: "dea", year_span: 2005 - 1999, color: "var(--bhyellow_light)", label: "MASTERS (FR)" },
                {name: "phd", year_span: 2012 - 2005, color: "var(--bhyellow_light)", label: "MASTERS + PHD (US)" },
                {name: "intel", year_span: 2016 - 2012, color: "var(--bhyellow_light)", label: "COMPUTATIONAL LINGUIST" },
                {name: "leave", year_span: 2017 - 2016, color: "var(--bhyellow_light)", label: "" },
                {name: "indeed_taxo", year_span: 2020 - 2017, color: "var(--bhyellow_light)", label: "TAXONOMY" },
                {name: "indeed_qm", year_span: 2021 - 2020, color: "var(--bhyellow_light)", label: "DEV" },
                {name: "indeed_dev", year_span: CURRENT_YEAR - 2021, color: "var(--bhyellow_light)", label: "SWE" }
                ];

            const relationsData = [
                {name: "none", year_span: 2002 - 1978, color: "none", label: "" },
                {name: "bob", year_span: 2006 - 2002, color: "var(--bhblue_light)", label: "BOB" },
                {name: "none1", year_span: 2008 - 2006, color: "none", label: "" },
                {name: "allison", year_span: 2016 - 2008, color: "var(--bhblue_light)", label: "ALLISON" },
                {name: "henry", year_span: CURRENT_YEAR - 2016, color: "var(--bhblue_light)", label: "ALLISON + HENRY" }//{name: "remainderrelations", year_span: 0, color: "var(--bhblue_light)", label: "" }
            ];
            
            const languagesData = [
                {name: "french", year_span: 1989 - 1978, color: "var(--bhblue)", label: "FRENCH" },
                {name: "french1", year_span: 2002 - 1989, color: "var(--bhblue)", label: "FRENCH" },
                {name: "french2", year_span: 2012 - 2002, color: "var(--bhblue)", label: "FRENCH" },
                {name: "english", year_span: CURRENT_YEAR - 2012, color: "var(--bhblue)", label: "ENGLISH" }
                ];
            
            function appendSectors(parentElementId, names, colors) {
                names.forEach((name, index) => {
                    var parentElement = document.getElementById(parentElementId);
                    var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                    path.setAttribute('id', 'sector'+name);
                    path.setAttribute('stroke', 'none');
                    path.setAttribute('fill', colors[index]);
                    path.setAttribute('fill-rule', 'evenodd');
                    parentElement.appendChild(path);
                });
                
                names.forEach((name, index) => {
                    var parentElement = document.getElementById(parentElementId);
                    var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                    path.setAttribute('id', 'sector'+name+'textpath');
                    path.setAttribute('stroke', 'none');
                    path.setAttribute('fill', 'none');
                    parentElement.appendChild(path);
                });
            }

            function makeSector(year_data, radius, start_date, end_date, lastItem) {
                var sectorBuffer = lastItem ? 0 : SECTOR_BUFFER;
                var number_of_years = end_date - start_date;
                var one_year = 300 / number_of_years;
                var start_angle = INITIAL_ANGLE + year_data.start * one_year;
                var end_angle = INITIAL_ANGLE + year_data.end * one_year - sectorBuffer;
                var start = polarToCartesian(CX, CY, radius, end_angle),
                    end = polarToCartesian(CX, CY, radius, start_angle),
                    largeArcFlag = end_angle - start_angle <= 180 ? "0" : "1";

                var path = ["M",
                    start.x,
                    start.y,
                    "A",
                    radius,
                    radius,
                    0,
                    largeArcFlag,
                    0,
                    end.x,
                    end.y,
                    "L",
                    CX,
                    CY,
                    "Z"
                ].join(" ");

                document.getElementById(year_data.name).setAttribute("d", path);
                
                 var start = polarToCartesian(CX, CY, radius-5, end_angle),
                    end = polarToCartesian(CX, CY, radius-5, start_angle),
                    largeArcFlag = end_angle - start_angle <= 180 ? "0" : "1";
                
                var textPath = ["M",
                    start.x,
                    start.y,
                    "A",
                    radius-5,
                    radius-5,
                    0,
                    largeArcFlag,
                    0,
                    end.x,
                    end.y
                ].join(" ");

                document.getElementById(year_data.name+'textpath').setAttribute("d", textPath);
                
                var textElement = document.createElementNS("http://www.w3.org/2000/svg", "text");
                textElement.setAttribute("font-size", "10");
                textElement.setAttribute("font-weight", "bold");
                textElement.setAttribute("fill", "#fff");

                var targetTextPath = '#'+year_data.name+'textpath'
                var textPathElement = document.createElementNS("http://www.w3.org/2000/svg", "textPath");
                textPathElement.setAttributeNS("http://www.w3.org/1999/xlink", "href", targetTextPath);
                textPathElement.setAttribute("startOffset", "5"); // Center the text on the path
                textPathElement.textContent = year_data.label;

                textElement.appendChild(textPathElement);
                
                document.getElementById('mainGraphFrame').appendChild(textElement);
            }

            function count_years(years) {
                let count = 0;
                let new_years = [];
                years.forEach((item) => {
                    new_years.push({ name: "sector" + item.name, start: count, end: count + item.year_span, label: item.label });
                    count += item.year_span;
                });
                return new_years;
            }
            
            function addSectors(parentElementId, sectorData, radius) {
                let sectorNames = sectorData.map(item => item.name);
                let sectorYears = sectorData.map(item => item.year_span);
                sectorYears.fill(0);
                let sectorColors = sectorData.map(item => item.color);
                let sectorLabels = sectorData.map(item => item.label);
                appendSectors(parentElementId, sectorNames, sectorColors)
                drawGraph(sectorNames, sectorLabels, sectorYears, START_YEAR, END_YEAR, radius) 
            }

            function drawGraph(sector_names, sector_labels, year_spans, start_date, end_date, radius) {
                var sectors_year_spans = sector_names.map((sector, index) => {
                    return { name: sector, year_span: year_spans[index], label: sector_labels[index]};
                });
                var cumulative_years = count_years(sectors_year_spans);
                var item_count = cumulative_years.length;
                
                cumulative_years.forEach((year_item, index) => {
                    var lastItem = index == item_count - 1;
                    makeSector(year_item, radius, start_date, end_date, lastItem);
                });
            }
            
            function generateRadiuses(start, increment, separator, pairs) {
                const radiuses = [];
                for (let i = 0; i < pairs; i++) {
                    const base = start + i * increment;
                    radiuses.push(base, base + separator);
                }
                return radiuses;
            }
        

            const underLayers = [
                {name: "activities", radius: 204},
                {name: "languages", radius: 144},
                {name: "relations", radius: 110}
                ];

            underLayers.forEach((underLayer) => {
                var underlayersector = document.getElementById(underLayer.name+'underlayer');
                var circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', CX);
                circle.setAttribute('cy', CY);
                circle.setAttribute('r', underLayer.radius);
                circle.setAttribute('fill', 'white');
                underlayersector.appendChild(circle);
                });
            
            addSectors("countries", countriesData, 260);
            addSectors("cities", citiesData, 230);
            addSectors("mainactivities", mainActivitiesData, 200);
            addSectors("activities", activitiesData, 170);
            addSectors("languages", languagesData, 140);
            addSectors("relations", relationsData, 110);
   
            const sectorGraph = {  
                names: [],
                labels: [],
                yearSpansStart: [],
                yearSpansTarget: [],
                year: CURRENT_YEAR,
                targetYear: END_YEAR,
                duration: 4000,
                startTime: 0,
                radius: 0,
                end_year: 0,
                animateGraphic: function (timestamp) {
                    if (!this.startTime) this.startTime = timestamp;
                    var progress = timestamp - this.startTime;
                    var fraction = Math.min(progress / this.duration, 1);
                    end_year = 0;
                    yearSpansCurrent = [];
                    for (var i = 0; i < this.yearSpansStart.length; i++) {
                        this.end_year = this.year + (this.targetYear - this.year) * fraction;
                        var startValue = this.yearSpansStart[i];
                        var endValue = this.yearSpansTarget[i];
                        yearSpansCurrent.push(startValue + (endValue - startValue) * fraction);
                    }
                    drawGraph(this.names, this.labels, yearSpansCurrent, START_YEAR, this.end_year, this.radius);
                    
                    if (progress < this.duration) {
                        requestAnimationFrame(this.animateGraphic.bind(this));
                    } else {
                        this.yearSpansStart = this.yearSpansTarget; // Ensure final state
                    }
                }
            }

            function startAnimation(names, labels, yearSpansStart, yearSpansTarget, radius) {
                const newSectorGraph = Object.create(sectorGraph);
                newSectorGraph.names = names;
                newSectorGraph.labels = labels;
                newSectorGraph.yearSpansStart = yearSpansStart;
                newSectorGraph.yearSpansTarget = yearSpansTarget;
                newSectorGraph.startTime = 0; // Reset startTime
                newSectorGraph.radius = radius;
                requestAnimationFrame(newSectorGraph.animateGraphic.bind(newSectorGraph)); // Bind the method to the object
            }
        
            var countriesNames = countriesData.map(item => item.name);
            var countriesLabels = countriesData.map(item => item.label);
            var countriesTargetYears = countriesData.map(item => item.year_span);
            var countriesStartYears = [...countriesTargetYears];
            var countriesStartYears = countriesStartYears.fill(0);
            
            var citiesNames = citiesData.map(item => item.name);
            var citiesLabels = citiesData.map(item => item.label);
            var citiesTargetYears = citiesData.map(item => item.year_span);
            var citiesStartYears = [...citiesTargetYears];
            var citiesStartYears = citiesStartYears.fill(0)
            
            var mainActivitiesNames = mainActivitiesData.map(item => item.name);
            var mainActivitiesLabels = mainActivitiesData.map(item => item.label);
            var mainActivitiesTargetYears = mainActivitiesData.map(item => item.year_span);
            var mainActivitiesStartYears = [...mainActivitiesTargetYears];
            var mainActivitiesStartYears = mainActivitiesStartYears.fill(0)
            
            var activitiesNames = activitiesData.map(item => item.name);
            var activitiesLabels = activitiesData.map(item => item.label);
            var activitiesTargetYears = activitiesData.map(item => item.year_span);
            var activitiesStartYears = [...activitiesTargetYears];
            var activitiesStartYears = activitiesStartYears.fill(0)
            
            var languagesNames = languagesData.map(item => item.name);
            var languagesLabels = languagesData.map(item => item.label);
            var languagesTargetYears = languagesData.map(item => item.year_span);
            var languagesStartYears = [...languagesTargetYears];
            var languagesStartYears = languagesStartYears.fill(0)
            
            var relationsNames = relationsData.map(item => item.name);
            var relationsLabels = relationsData.map(item => item.label);
            var relationsTargetYears = relationsData.map(item => item.year_span);
            var relationsStartYears = [...relationsTargetYears];
            var relationsStartYears = relationsStartYears.fill(0)
            
            function startAllAnimations() {
                startAnimation(countriesNames, countriesLabels, countriesStartYears, countriesTargetYears, 260);
                startAnimation(citiesNames, citiesLabels, citiesStartYears, citiesTargetYears, 230);
                startAnimation(mainActivitiesNames, mainActivitiesLabels, mainActivitiesStartYears, mainActivitiesTargetYears, 200);
                startAnimation(activitiesNames, activitiesLabels, activitiesStartYears, activitiesTargetYears, 170);
                startAnimation(languagesNames, languagesLabels, languagesStartYears, languagesTargetYears, 140);
                startAnimation(relationsNames, relationsLabels, relationsStartYears, relationsTargetYears, 110);
            }
        
            setTimeout(startAllAnimations, 4000);
    </script>
</body>

</html>